<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NEXUS â€” Login</title>
    <style>
      /* Reset & Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, sans-serif;
      }

      body {
        background-color: #f8f9fa;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      /* Main Container */
      .container {
        display: flex;
        flex-direction: column;
        width: 100%;
        max-width: 1000px;
        min-height: 500px;
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
      }

      /* Left Side - Brand/Image */
      .brand-side {
        flex: 1;
        background: linear-gradient(135deg, #111111 0%, #2d2d2d 100%);
        padding: 50px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .brand-side::before {
        content: "";
        position: absolute;
        top: -50%;
        right: -20%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 107, 53, 0.1) 0%,
          transparent 70%
        );
      }

      .brand-logo {
        font-size: 48px;
        font-weight: 900;
        color: white;
        margin-bottom: 20px;
        z-index: 1;
      }

      .brand-logo span {
        color: #ff6b35;
      }

      .brand-tagline {
        color: rgba(255, 255, 255, 0.8);
        font-size: 18px;
        line-height: 1.6;
        max-width: 400px;
        z-index: 1;
      }

      .brand-image {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 80%;
        opacity: 0.05;
        z-index: 0;
      }

      /* Right Side - Login Form */
      .form-side {
        flex: 1;
        padding: 60px 50px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .form-header {
        margin-bottom: 40px;
      }

      .form-header h1 {
        font-size: 32px;
        font-weight: 700;
        color: #111111;
        margin-bottom: 8px;
      }

      .form-header p {
        color: #666;
        font-size: 16px;
      }

      /* Form Styles */
      #login-form {
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .input-group {
        position: relative;
      }

      .input-group label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 600;
        color: #444;
      }

      .input-group input {
        width: 100%;
        padding: 16px;
        border: 2px solid #e1e5e9;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.2s;
        background: white;
      }

      .input-group input:focus {
        outline: none;
        border-color: #ff6b35;
        box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
      }

      .input-group input.error {
        border-color: #ff4444;
      }

      .toggle-password {
        position: absolute;
        right: 16px;
        top: 42px;
        background: none;
        border: none;
        color: #666;
        cursor: pointer;
        font-size: 18px;
        padding: 4px;
      }

      /* Remember & Forgot */
      .form-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
      }

      .remember-me {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .remember-me input {
        width: 18px;
        height: 18px;
        accent-color: #ff6b35;
      }

      .remember-me label {
        font-size: 14px;
        color: #555;
      }

      .forgot-link {
        color: #ff6b35;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: color 0.2s;
      }

      .forgot-link:hover {
        color: #e55a2b;
        text-decoration: underline;
      }

      /* Submit Button */
      .submit-btn {
        background: #111111;
        color: white;
        border: none;
        padding: 18px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        margin-top: 10px;
        position: relative;
        overflow: hidden;
      }

      .submit-btn:hover {
        background: #ff6b35;
        transform: translateY(-1px);
      }

      .submit-btn:active {
        transform: translateY(0);
      }

      .submit-btn.loading {
        opacity: 0.8;
        cursor: not-allowed;
      }

      .submit-btn.loading::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        margin: -10px 0 0 -10px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Divider */
      .divider {
        display: flex;
        align-items: center;
        margin: 25px 0;
        color: #8e8e8e;
      }

      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: #e1e5e9;
      }

      .divider span {
        padding: 0 15px;
        font-size: 14px;
        color: #666;
      }

      /* Signup Link */
      .signup-link {
        text-align: center;
        margin-top: 30px;
        color: #666;
        font-size: 15px;
      }

      .signup-link a {
        color: #ff6b35;
        text-decoration: none;
        font-weight: 600;
        margin-left: 5px;
        transition: color 0.2s;
      }

      .signup-link a:hover {
        color: #e55a2b;
        text-decoration: underline;
      }

      /* Messages */
      .error-message {
        color: #ff4444;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      .success-message {
        color: #28a745;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      /* Responsive */
      @media (max-width: 760px) {
        .container {
          flex-direction: column;
          min-height: auto;
        }

        .brand-side {
          padding: 40px 30px;
          min-height: 200px;
        }

        .form-side {
          padding: 40px 30px;
        }

        .brand-logo {
          font-size: 36px;
        }
      }

      @media (max-width: 480px) {
        .brand-side,
        .form-side {
          padding: 30px 20px;
        }

        .form-header h1 {
          font-size: 28px;
        }

        .brand-logo {
          font-size: 32px;
        }
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <!-- Left Side - Brand -->
      <div class="brand-side">
        <div class="brand-logo">NEX<span>US</span></div>
        <p class="brand-tagline">
          Premium athletic gear for those who push boundaries. Join our
          community of champions and experience performance redefined.
        </p>
        <svg
          class="brand-image"
          viewBox="0 0 400 300"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M50,150 Q200,50 350,150 T200,250 Z"
            fill="none"
            stroke="white"
            stroke-width="2"
          />
          <path
            d="M100,100 Q200,50 300,100 T200,200 Z"
            fill="none"
            stroke="white"
            stroke-width="1"
          />
        </svg>
      </div>

      <!-- Right Side - Login Form -->
      <div class="form-side">
        <div class="form-header">
          <h1>Welcome Back</h1>
          <p>Sign in to your account to continue</p>
        </div>

        <form id="login-form">
          <div class="input-group">
            <label for="email">Email Address</label>
            <input
              type="email"
              id="email"
              placeholder="you@example.com"
              required
            />
          </div>

          <div class="input-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              placeholder="Enter your password"
              required
            />
            <button type="button" class="toggle-password" id="togglePassword">
              <i class="far fa-eye"></i>
            </button>
          </div>

          <div class="form-options">
            <div class="remember-me">
              <input type="checkbox" id="remember" />
              <label for="remember">Remember me</label>
            </div>
            <a href="#" class="forgot-link">Forgot password?</a>
          </div>

          <button type="submit" class="submit-btn">Sign In</button>

          <div class="signup-link">
            Don't have an account?
            <a href="signup.html">Create account</a>
          </div>
        </form>
      </div>
    </div>

    <script>
      // API Base URL
      const API_BASE = "https://backendroutes-lcpt.onrender.com";

      // Toggle password visibility
      const togglePassword = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("password");
      const eyeIcon = togglePassword.querySelector("i");

      togglePassword.addEventListener("click", function () {
        const type =
          passwordInput.getAttribute("type") === "password"
            ? "text"
            : "password";
        passwordInput.setAttribute("type", type);

        if (type === "text") {
          eyeIcon.classList.remove("fa-eye");
          eyeIcon.classList.add("fa-eye-slash");
        } else {
          eyeIcon.classList.remove("fa-eye-slash");
          eyeIcon.classList.add("fa-eye");
        }
      });

      // Form submission - EXACT SAME LOGIC
      const loginForm = document.getElementById("login-form");
      const submitButton = loginForm.querySelector('button[type="submit"]');

      if (loginForm) {
        loginForm.addEventListener("submit", async function (e) {
          e.preventDefault();

          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          // Basic validation
          if (!email || !password) {
            showError("Please fill in all fields");
            return;
          }

          // Email validation
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            showError("Please enter a valid email address");
            return;
          }

          // Add loading state
          submitButton.classList.add("loading");
          submitButton.disabled = true;

          try {
            const res = await fetch(`${API_BASE}/auth/login`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ email, password }),
            });

            const data = await res.json();

            if (!res.ok) {
              throw new Error(data.message || "Login failed");
            }

            // Store user session
            localStorage.setItem("user", JSON.stringify(data.user));

            // Show success message
            showSuccess("Login successful! Redirecting...");

            // Redirect after a short delay
            setTimeout(() => {
              window.location.href = "index.html";
            }, 1000);
          } catch (err) {
            // Show error message
            showError(err.message || "Login failed");

            // Remove loading state on error
            submitButton.classList.remove("loading");
            submitButton.disabled = false;
          }
        });
      }

      // Show error message function
      function showError(message) {
        let errorEl = document.querySelector(".error-message");
        if (!errorEl) {
          errorEl = document.createElement("div");
          errorEl.className = "error-message";
          loginForm.appendChild(errorEl);
        }

        errorEl.textContent = message;
        errorEl.style.display = "block";

        // Add error class to inputs
        const inputs = document.querySelectorAll("input");
        inputs.forEach((input) => {
          input.classList.add("error");
          setTimeout(() => input.classList.remove("error"), 3000);
        });

        // Hide error after 3 seconds
        setTimeout(() => {
          errorEl.style.display = "none";
        }, 3000);
      }

      // Show success message function
      function showSuccess(message) {
        let successEl = document.querySelector(".success-message");
        if (!successEl) {
          successEl = document.createElement("div");
          successEl.className = "success-message";
          loginForm.appendChild(successEl);
        }

        successEl.textContent = message;
        successEl.style.display = "block";
      }

      // Add focus effects to inputs
      const inputs = document.querySelectorAll("input");
      inputs.forEach((input) => {
        input.addEventListener("focus", function () {
          this.classList.remove("error");
        });
      });
    </script>
  </body>
</html>
